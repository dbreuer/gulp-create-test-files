{"version":3,"sources":["helper.js"],"names":[],"mappings":"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","file":"helper-compiled.js","sourcesContent":["//helper.js\n/**\n * Created by David Breuer on 18/11/15.\n *\n * @file helper.js\n * @description\n *\n */\n'use strict';\n\nvar fs = require('fs');\n\nfunction testHelper() {}\n\ntestHelper.prototype.removeExtension = function (filename) {\n    var lastDotPosition = filename.lastIndexOf(\".\");\n    if (lastDotPosition === -1) return filename;else return filename.substr(0, lastDotPosition);\n};\n\ntestHelper.prototype.replaceExtension = function (filename, newextension) {\n    return this.removeExtension(filename) + newextension;\n};\n\ntestHelper.prototype.truncateJsSuffix = function (name) {\n\n    return name.replace(/.js$/i, '');\n};\n\ntestHelper.prototype.capitalize = function (str) {\n\n    return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\ntestHelper.prototype.dasherize = function (string) {\n    return string.replace(/([^])([A-Z]+)([^$])/g, '$1-$2$3').toLowerCase();\n};\n\ntestHelper.prototype.isAngular = function (file) {\n    var angularRegExp = /\\.(module)[\\(\\']'(.*)'/g;\n    var match = angularRegExp.exec(String(file.contents));\n    return match !== null;\n};\n\ntestHelper.prototype.hasTest = function (file) {\n    if (fs.existsSync(file.path.replace('.js', '.spec.js'))) {\n        return true;\n    }\n\n    if (file.path.indexOf('min.js') > -1) {\n        return true;\n    }\n\n    if (file.path.indexOf('test.js') > -1) {\n        return true;\n    }\n\n    if (file.path.indexOf('build.js') > -1) {\n        return true;\n    }\n\n    if (file.path.indexOf('bower_components') > -1) {\n        return true;\n    }\n    return false;\n};\n\ntestHelper.prototype.getAllCache = function (content) {\n    var m;\n    var out = [];\n    var re = /CacheFactory\\.get\\('(\\w*)'\\)/gm;\n    while ((m = re.exec(content)) !== null) {\n        if (m.index === re.lastIndex) {\n            re.lastIndex++;\n        }\n        if (out.indexOf(m[1]) === -1) {\n            out.push(m[1]);\n        }\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllServices = function (content) {\n    var m;\n    var out = [];\n    var re = /function\\s+(.\\w*)\\((.*)\\)[\\s\\{]+return\\s(.*http.*)/gm;\n    var reService = /\\$http.(get|delete)\\((.*?)\\)+.then\\((.*?)\\)/g;\n    while ((m = re.exec(content)) !== null) {\n        var tmpName, tmpDeps, tmpType, tmpUrl, tmpCallbacks;\n        if (m.index === re.lastIndex) {\n            re.lastIndex++;\n        }\n        var mService = reService.exec(m[3]);\n        tmpName = m[1];\n        tmpDeps = m[2].split(',');\n        tmpDeps = tmpDeps.map(function (s) {\n            return s.trim();\n        });\n        if (mService !== null) {\n            tmpType = mService[1].toUpperCase();\n            tmpUrl = mService[2];\n            tmpCallbacks = mService[3].split(',');\n            tmpCallbacks = tmpCallbacks.map(function (s) {\n                return s.trim();\n            });\n        }\n\n        out.push({ name: tmpName, dep: tmpDeps, type: tmpType, url: tmpUrl, callbacks: tmpCallbacks });\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllModules = function (content) {\n    var m;\n    var out = [];\n    var typeTestModule = /\\.(module)[\\(\\']'(.*)'/g;\n    while ((m = typeTestModule.exec(content)) !== null) {\n        if (m.index === typeTestModule.lastIndex) {\n            typeTestModule.lastIndex++;\n        }\n        out.push(m[1]);\n        out.push(m[2]);\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllModuleDependency = function (content) {\n    var m;\n    var out = [];\n    var typeModuleDependency = /module\\(\\'\\w+\\'\\,\\s+(\\[[\\s\\S]*?\\])\\)/g;\n    while ((m = typeModuleDependency.exec(content)) !== null) {\n        if (m.index === typeModuleDependency.lastIndex) {\n            typeModuleDependency.lastIndex++;\n        }\n        out.push(m);\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllProviders = function (content) {\n    var m;\n    var out = [];\n    var typeTestCtrl = /\\.(controller|service|factory|config|run|directive|config)[\\(\\']'(\\w*)'/g;\n    while ((m = typeTestCtrl.exec(content)) !== null) {\n        if (m.index === typeTestCtrl.lastIndex) {\n            typeTestCtrl.lastIndex++;\n        }\n        out.push([m[1], m[2]]);\n    }\n    return out[0];\n};\n\ntestHelper.prototype.getAllFunctions = function (content) {\n    var m;\n    var out = [];\n    var re = /function\\s+(.\\w*)\\((.*)\\)|var\\s+(\\w*)\\s+=\\s+function\\s+\\((.*)\\)/gm;\n    while ((m = re.exec(content)) !== null) {\n        if (m.index === re.lastIndex) {\n            re.lastIndex++;\n        }\n        var tmpName = m[1];\n        var tmpDep = m[2].split(',');\n        tmpDep = tmpDep.map(function (s) {\n            return s.trim();\n        });\n        out.push({ name: tmpName, dep: tmpDep });\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllConfig = function (content) {\n    var m;\n    var out = [];\n    var re = /config\\((.*)\\)/g;\n    while ((m = re.exec(content)) !== null) {\n        if (m.index === re.lastIndex) {\n            re.lastIndex++;\n        }\n        var lttleReg = m[1].split(',');\n        var i = lttleReg.length;\n        while (i--) {\n            var pattern = lttleReg[i].trim();\n            if (pattern !== 'config') {\n                var patternBase = new RegExp(\"\" + pattern + \".(.*)\");\n                console.log(patternBase, testHelper.lineNumbers(\"\" + pattern + \"\\\\.(.*)\", content));\n            }\n        }\n        out.push();\n    }\n\n    return out;\n};\n\ntestHelper.prototype.getAllDrupal = function (content) {\n    var m;\n    var out = [];\n    var re = /Drupal\\.([\\w\\W]*)/gm;\n    while ((m = re.exec(content)) !== null) {\n        if (m.index === re.lastIndex) {\n            re.lastIndex++;\n        }\n        out.push(m[1]);\n    }\n    return out;\n};\n\ntestHelper.prototype.lineNumberByIndex = function (index, string) {\n    // RegExp\n    var line = 0,\n        match,\n        re = /(^)[\\S\\s]/gm;\n    while (match = re.exec(string)) {\n        if (match.index > index) break;\n        line++;\n    }\n    return line;\n};\n\ntestHelper.prototype.lineNumbers = function (needle, haystack) {\n    if (needle !== \"\") {\n        var i = 0,\n            a = [],\n            index = -1;\n        while ((index = haystack.match(needle, index + 1)) != -1) {\n            a.push(testHelper.lineNumberByIndex(index, haystack));\n        }\n        return a;\n    }\n};\n\nmodule.exports = new testHelper();\n"]}