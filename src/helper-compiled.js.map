{"version":3,"sources":["helper.js"],"names":[],"mappings":"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","file":"helper-compiled.js","sourcesContent":["//helper.js\n/**\n * Created by David Breuer on 18/11/15.\n *\n * @file helper.js\n * @description\n *\n */\n'use strict';\nvar fs = require('fs');\n\n\nfunction testHelper() {}\n\ntestHelper.prototype.removeExtension = function(filename){\n    var lastDotPosition = filename.lastIndexOf(\".\");\n    if (lastDotPosition === -1) return filename;\n    else return filename.substr(0, lastDotPosition);\n};\n\ntestHelper.prototype.replaceExtension = function(filename, newextension) {\n    return this.removeExtension(filename) + newextension;\n}\n\ntestHelper.prototype.truncateJsSuffix = function(name) {\n\n    return name.replace(/.js$/i, '');\n};\n\ntestHelper.prototype.capitalize = function(str) {\n\n    return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\ntestHelper.prototype.dasherize = function( string ) {\n    return string. replace ( /([^])([A-Z]+)([^$])/g, '$1-$2$3' ). toLowerCase();\n};\n\ntestHelper.prototype.isAngular = function( file ) {\n    var angularRegExp = /\\.(module)[\\(\\']'(.*)'/g;\n    var match = angularRegExp.exec(String(file.contents));\n    return match!==null;\n};\n\ntestHelper.prototype.hasTest = function( file ) {\n    if (fs.existsSync(file.path.replace('.js', '.spec.js'))) {\n        return true;\n    }\n\n    if (file.path.indexOf('min.js') > -1) {\n        return true;\n    }\n\n    if (file.path.indexOf('test.js') > -1) {\n        return true;\n    }\n\n    if (file.path.indexOf('build.js') > -1) {\n        return true;\n    }\n\n    if (file.path.indexOf('bower_components') > -1) {\n        return true;\n    }\n    return false;\n};\n\ntestHelper.prototype.getAllCache = function( content ) {\n    var m;\n    var out = [];\n    var re = /CacheFactory\\.get\\('(\\w*)'\\)/gm;\n    while ((m = re.exec(content)) !== null) {\n        if (m.index === re.lastIndex) { re.lastIndex++; }\n        if (out.indexOf(m[1])===-1) {\n            out.push(m[1]);\n        }\n\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllServices = function( content ) {\n    var m;\n    var out = [];\n    var re = /function\\s+(.\\w*)\\((.*)\\)[\\s\\{]+return\\s(.*http.*)/gm;\n    var reService = /\\$http.(get|delete)\\((.*?)\\)+.then\\((.*?)\\)/g;\n    while ((m = re.exec(content)) !== null) {\n        var tmpName, tmpDeps, tmpType, tmpUrl, tmpCallbacks;\n        if (m.index === re.lastIndex) { re.lastIndex++; }\n        var mService = reService.exec(m[3]);\n        tmpName = m[1];\n        tmpDeps = m[2].split(',');\n        tmpDeps = tmpDeps.map(function(s) { return s.trim(); });\n        if (mService !== null) {\n            tmpType = mService[1].toUpperCase();\n            tmpUrl = mService[2];\n            tmpCallbacks = mService[3].split(',');\n            tmpCallbacks = tmpCallbacks.map(function(s) { return s.trim(); });\n        }\n\n        out.push({name: tmpName, dep: tmpDeps, type: tmpType, url: tmpUrl, callbacks: tmpCallbacks});\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllModules = function( content ) {\n    var m;\n    var out = [];\n    var typeTestModule = /\\.(module)[\\(\\']'(.*)'/g;\n    while ((m = typeTestModule.exec(content)) !== null) {\n        if (m.index === typeTestModule.lastIndex) { typeTestModule.lastIndex++; }\n        out.push(m[1]);\n        out.push(m[2]);\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllModuleDependency = function( content ) {\n    var m;\n    var out = [];\n    var typeModuleDependency = /module\\(\\'\\w+\\'\\,\\s+(\\[[\\s\\S]*?\\])\\)/g;\n    while ((m = typeModuleDependency.exec(content)) !== null) {\n        if (m.index === typeModuleDependency.lastIndex) { typeModuleDependency.lastIndex++; }\n        out.push(m);\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllProviders = function( content ) {\n    var m;\n    var out = [];\n    var typeTestCtrl = /\\.(controller|service|factory|config|run|directive|config)[\\(\\']'(\\w*)'/g;\n    while ((m = typeTestCtrl.exec(content)) !== null) {\n        if (m.index === typeTestCtrl.lastIndex) { typeTestCtrl.lastIndex++; }\n        out.push([m[1], m[2]]);\n    }\n    return out[0];\n};\n\ntestHelper.prototype.getAllFunctions = function( content ) {\n    var m;\n    var out = [];\n    var re = /function\\s+(.\\w*)\\((.*)\\)|var\\s+(\\w*)\\s+=\\s+function\\s+\\((.*)\\)/gm;\n    while ((m = re.exec(content)) !== null) {\n        if (m.index === re.lastIndex) { re.lastIndex++; }\n        var tmpName = m[1];\n        var tmpDep = m[2].split(',');\n        tmpDep = tmpDep.map(function(s) { return s.trim(); });\n        out.push({name: tmpName, dep: tmpDep});\n    }\n    return out;\n};\n\ntestHelper.prototype.getAllConfig = function( content ) {\n    var m;\n    var out = [];\n    var re = /config\\((.*)\\)/g;\n        while ((m = re.exec(content)) !== null) {\n            if (m.index === re.lastIndex) {\n                re.lastIndex++;\n            }\n            var lttleReg = m[1].split(',');\n            var i = lttleReg.length;\n            while (i--) {\n                var pattern = lttleReg[i].trim();\n                if (pattern !== 'config') {\n                    var patternBase = new RegExp(\"\" + pattern +\".(.*)\" );\n                    console.log(patternBase, testHelper.lineNumbers(\"\" + pattern +\"\\\\.(.*)\", content));\n                }\n            }\n            out.push();\n        }\n\n    return out;\n}\n\ntestHelper.prototype.getAllDrupal = function( content ) {\n    var m;\n    var out = [];\n    var re = /Drupal\\.([\\w\\W]*)/gm;\n    while ((m = re.exec(content)) !== null) {\n        if (m.index === re.lastIndex) { re.lastIndex++; }\n        out.push(m[1]);\n    }\n    return out;\n\n}\n\ntestHelper.prototype.lineNumberByIndex = function(index,string){\n    // RegExp\n    var line = 0,\n        match,\n        re = /(^)[\\S\\s]/gm;\n    while (match = re.exec(string)) {\n        if(match.index > index)\n            break;\n        line++;\n    }\n    return line;\n}\n\ntestHelper.prototype.lineNumbers = function(needle,haystack){\n    if(needle !== \"\"){\n        var i = 0,a=[],index=-1;\n        while((index=haystack.match(needle, index+1)) != -1){\n            a.push(testHelper.lineNumberByIndex(index,haystack));\n        }\n        return a;\n    }\n}\n\nmodule.exports = new testHelper();"]}