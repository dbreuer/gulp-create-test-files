{"version":3,"sources":["template.js"],"names":[],"mappings":";;;;;;;;AAQA,YAAY,CAAC;;AAEb,IAAI,EAAE,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAC7B,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAE3B,IAAI,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AAC/B,IAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAC/B,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACjC,IAAI,SAAS,GAAG,OAAO,CAAC,mBAAmB,CAAC;;;;AAAC,AAI7C,IAAI,QAAQ,GAAG,MAAM,CAAC,OAAO,GAAG,EAAE;;;;AAAC,AAInC,QAAQ,CAAC,IAAI,GAAG,UAAU,IAAI,EAAE;AAC5B,WAAO,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;CAC7C,CAAC;;AAEF,QAAQ,CAAC,UAAU,GAAG,UAAU,IAAI,EAAE;AAClC,QAAI,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC;AAC/D,WAAO,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC,CAAC;CACnE;;;;AAAC,AAIF,SAAS,IAAI,CAAC,IAAI,EAAE,YAAY,EAAE;;AAE9B,QAAI,QAAQ,GAAG,IAAI,GAAG,CAAC,CAAC,YAAY,CAAC;AACrC,QAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;;AAEnD,QAAI,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC;;AAElE,QAAI,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC;AAChD,QAAI,OAAO,EAAE;;AAET,YAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AACnC,YAAI,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC;;AAEhE,YAAI,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,EAAE;AAChC,wBAAY,GAAG,eAAe,CAAC;SAClC;KACJ;;AAED,QAAI,cAAc,GAAG,EAAE,CAAC;;AAExB,QAAI;AACA,sBAAc,GAAG,EAAE,CAAC,YAAY,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;KAC1D,CAAC,OAAO,GAAG,EAAE;AACV,eAAO,CAAC,GAAG,CAAC,aAAa,GAAG,YAAY,CAAC,CAAC;AAC1C,YAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE;AACvB,kBAAM,IAAI,SAAS,CAAC,0BAA0B,CAAC,CAAC;SACnD;AACD,YAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE;AACvB,kBAAM,IAAI,SAAS,CAAC,iDAAiD,CAAC,CAAC;SAC1E;KACJ;;AAED,WAAO,cAAc,CAAC;CACzB","file":"template-compiled.js","sourcesContent":["//template.js\n/**\n * Created by David Breuer on 15/12/15.\n *\n * @file template.js\n * @description\n *\n */\n'use strict';\n\nvar fs = require('fs-extra');\nvar path = require('path');\n\nvar C = require('./constants');\nvar cache = require('./cache');\nvar config = require('./config');\nvar UserError = require('./error/UserError');\n\n////////\n\nvar template = module.exports = {};\n\n////////\n\ntemplate.unit = function (type) {\n    return load(type, path.join('templates'));\n};\n\ntemplate.dependency = function (type) {\n    var mappedType = config.dependencies.templateMap[type] || type;\n    return load(mappedType, path.join('templates', 'dependencies'));\n};\n\n////////\n\nfunction load(type, relativePath) {\n\n    var fileName = type + C.TEMPLATE_EXT;\n    var defaultsDir = path.join(__dirname, 'defaults');\n\n    var templatePath = path.join(defaultsDir, relativePath, fileName);\n\n    var usePath = cache.get(C.CACHE_USE_CONFIG_KEY);\n    if (usePath) {\n\n        var useDir = path.dirname(usePath);\n        var useTemplatePath = path.join(useDir, relativePath, fileName);\n\n        if (fs.existsSync(useTemplatePath)) {\n            templatePath = useTemplatePath;\n        }\n    }\n\n    var templateSource = '';\n\n    try {\n        templateSource = fs.readFileSync(templatePath, 'utf8');\n    } catch (err) {\n        console.log(\"temp_PATH: \" + templatePath);\n        if (err.code === 'ENOENT') {\n            throw new UserError('Template file not found.');\n        }\n        if (err.code === 'EACCES') {\n            throw new UserError('Not enough permissions to access template file.');\n        }\n    }\n\n    return templateSource;\n}\n"]}